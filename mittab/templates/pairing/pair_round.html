{% extends "base/__normal.html" %}
{% load tags %}

{% block title %}{{ title }}{% endblock %}

{% block content %}

<div class="col-2"></div>
<div id="pairing_form" class="col-8">
  <h3 class="text-center mb-4">{{ title }}</h3>
  <form action="." method="post" id="break-settings-form"
        data-initial-var="{{ break_settings.var_teams }}"
        data-initial-nov="{{ break_settings.nov_teams }}"
        data-initial-concurrent="{{ break_settings.concurrent_round }}">
    {% csrf_token %}
    {% return_to_input request.path %}
    {% if break_settings %}
    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">Break Configuration</h5>
        <div class="form-row">
          <div class="form-group col-md-4">
            <label for="var-teams-input">Varsity Teams to Break</label>
            <input type="number"
                   min="2"
                   step="1"
                   class="form-control"
                   id="var-teams-input"
                   name="var_teams_to_break"
                   value="{{ break_settings.var_teams }}"
                   required>
          </div>
          <div class="form-group col-md-4">
            <label for="nov-teams-input">Novice Teams to Break</label>
            <input type="number"
                   min="0"
                   step="1"
                   class="form-control"
                   id="nov-teams-input"
                   name="nov_teams_to_break"
                   value="{{ break_settings.nov_teams }}"
                   required>
          </div>
          <div class="form-group col-md-4">
            <label id="novice-concurrent-label" for="novice-concurrent-select">
              Novice Round of {{ break_settings.nov_teams }} runs concurrent with
            </label>
            <select class="form-control"
                    id="novice-concurrent-select"
                    name="novice_concurrent_var_round"
                    {% if not break_settings.var_round_options %}disabled{% endif %}>
              <option value="">No concurrent round</option>
              {% for option in break_settings.var_round_options %}
                <option value="{{ option }}"
                        {% if break_settings.concurrent_round == option %}selected{% endif %}>
                  Varsity Round of {{ option }}
                </option>
              {% endfor %}
            </select>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
    <table class="check_status table">
      <thead class="thead-dark">
        <th>Sanity Check</th><th>Successful?</th>
      </thead>
      {% for check,status,alt in check_status%}
      <tr class="table-{% if status == "No" %}danger font-weight-bolder{% else %}light{% endif %}">
        <td>{{check}}</td>
        <td title="{{alt}}">{{status}}</td>
      </tr>
      {% endfor %}
    </table>
    <div class="mt-5">
      <p class="alert alert-warning">
        This action will attempt to pair the next round. If you have ignored the warnings above it may fail. Be warned, and always backup if you are unsure.
      </p>
      <input class="btn btn-primary btn-block btn-lg" type="submit" value="Pair This Round">
    </div>
  </form>
</div>
<div class="col-2"></div>

{% endblock %}
