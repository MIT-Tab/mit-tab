{% extends "base/__wide.html" %}
{% load render_bundle from webpack_loader %}

<<<<<<< HEAD:mittab/templates/outrounds/pretty_pairing.html
<html>
<head>
    <!-- jQuery 3.7.1 from CDN (required for custom scripts) -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" 
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" 
            crossorigin="anonymous"></script>
    
    <!-- Bootstrap 5.3.2 CSS & JS Bundle (required for nav tabs in bracket view) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" 
          rel="stylesheet" 
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" 
          crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" 
            crossorigin="anonymous"></script>
    
    {% load render_bundle from webpack_loader %}
    {% render_bundle 'pairingDisplay' %}
	{% if show_outrounds_bracket %}
		{% render_bundle 'bracket' %}
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/brackets-viewer@latest/dist/brackets-viewer.min.css" />
		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brackets-viewer@latest/dist/brackets-viewer.min.js"></script>
	{% endif %}
    <title>{{ label }}</title>
=======
{% block title %}{{ label }}{% endblock %}
{% block body_class %}show-team-names{% endblock %}
>>>>>>> origin/master:mittab/templates/public/outround_pairing.html

{% block extra_head %}
    {% render_bundle 'publicDisplay' %}
{% if show_outrounds_bracket %}
{% render_bundle 'bracket' %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/brackets-viewer@latest/dist/brackets-viewer.min.css" />
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/brackets-viewer@latest/dist/brackets-viewer.min.js"></script>
{% endif %}
{% endblock %}

{% block content %}
<div class="col-12">
    <div id="scrollPage" class="hidden"></div>
      <h1>{{ label }}</h1>
      <!--<h3>({{team_count}} teams)</h3>-->
		{% if show_outrounds_bracket %}
      <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item" role="presentation">
                  <a class="nav-link active" id="list-view-tab" href="#list-view" role="tab" aria-controls="list-view" aria-selected="true">List View</a>
              </li>
              <li class="nav-item" role="presentation">
                  <a class="nav-link" id="bracket-view-tab" href="#bracket-view" role="tab" aria-controls="bracket-view" aria-selected="false">Bracket View</a>
              </li>
          </ul>
		{% endif %}

        <div class="tab-content">
        <div id="list-view" class="tab-pane fade show active" role="tabpanel" aria-labelledby="list-view-tab">
	{% for outround in outround_pairings %}
	    <center><h4><b>{{ outround.label }}</b></h4></center>
	    <table class="public_table">
		<thead>
          <tr>
          <th style="width: 30%;">
              {% if gov_opp_display %}Government{% else %}Team 1{% endif %}
          </th> <th style="width: 30%;">
              {% if gov_opp_display %}Opposition{% else %}Team 2{% endif %}
          </th> <th style="width: 20%;">
              Judge
          </th> <th style="width: 20%;">
              Room
          </th>
          </tr>
		</thead>
		<tbody>
		{% for pairing in outround.rounds %}
		    
		    <tr>
			<td>
			    {% if sidelock and pairing.sidelock %}<b>{% endif %}
			    {% if choice and pairing.choice == 1 %}<b>{% endif %}
				<div class="team-names">
					{{pairing.gov_team.display}}
				</div>
				{% if debater_team_memberships_public %}
				<div class="member-names">
					{{pairing.gov_team.debaters_display}}
				</div>
				{% endif %}
			    {% if choice and pairing.choice == 1 %}</b>{% endif %}
			    {% if sidelock and pairing.sidelock %}</b>{% endif %}
			</td>
			<td>
			    {% if choice and pairing.choice == 2 %}<b>{% endif %}
				<div class="team-names">
					{{pairing.opp_team.display}}
				</div>
				{% if debater_team_memberships_public %}
				<div class="member-names">
					{{pairing.opp_team.debaters_display}}
				</div>
				{% endif %}
			    {% if choice and pairing.choice == 2 %}</b>{% endif %}
			</td>
			<td>
			    {% for judge in pairing.judges.all %}
				{% if pairing.judges.all|length > 1 and judge == pairing.chair %}
				    <b>{{judge.name}}</b><br>
				{% else %}
				    {{judge.name}}<br>
				{% endif %}
			    {% endfor %}
			</td>
			<td>{{pairing.room.name}}</td>
		    </tr>
		{% endfor %}
		{% if outround.excluded|length > 0 %}
		    <tr>
			<td><b>Advancing Teams:</b></td>
			<td colspan="3">
			    {% for team in outround.excluded %}
				{{ team.display }}{% if not forloop.last %}, {% endif %}
			    {% endfor %}
			</td>
		    </tr>
		{% endif %}
		</tbody>
	    </table>
	{% empty %}
	    <div style="padding: 20px;">Nothing is visible.</div>
	{% endfor %}
        </div>

        {% if show_outrounds_bracket %}
        <div id="bracket-view" class="tab-pane fade" role="tabpanel" aria-labelledby="bracket-view-tab">
            {% if bracket_data_json %}
                <div class="brackets-viewer" id="brackets-viewer-container"></div>
                <div id="match-modal-backdrop" class="match-modal__backdrop" hidden></div>
                <div id="match-metadata-modal" class="match-modal" role="dialog" aria-modal="true" aria-labelledby="match-modal-title" hidden>
                    <div class="match-modal__content card shadow-lg border border-primary">
                        <button type="button" class="match-modal__close close text-muted" id="close-modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                        <div class="card-body match-modal__body">
                            <h2 id="match-modal-title" class="h5 mb-3">Match Details</h2>
                            <div class="match-teams">
                                <div class="match-team" data-team="gov">
                                    <span class="match-team__label" data-team-label="gov">Team 1</span>
                                    <span class="match-team__name" data-team-name="gov">TBD</span>
                                    <span class="match-team__members d-none" data-team-members="gov"></span>
                                </div>
                                <div class="match-team" data-team="opp">
                                    <span class="match-team__label" data-team-label="opp">Team 2</span>
                                    <span class="match-team__name" data-team-name="opp">TBD</span>
                                    <span class="match-team__members d-none" data-team-members="opp"></span>
                                </div>
                            </div>
                            <div class="match-section match-room">
                                <span class="match-section__label">Room</span>
                                <span class="room-name" data-room>TBD</span>
                            </div>
                            <div class="match-section match-judges">
                                <span class="match-section__label">Judges</span>
                                <ul class="match-section__value judge-list list-unstyled mb-0" data-judges></ul>
                            </div>
                            <p class="match-error text-danger small d-none" id="match-modal-error"></p>
                        </div>
                    </div>
                </div>
                <script>
                window.bracketViewerData = JSON.parse('{{ bracket_data_json|escapejs }}');
                </script>
            {% else %}
                <div class="bracket-empty">No bracket data available.</div>
            {% endif %}
        </div>
        {% endif %}
        </div>
    <div class="public_footer_spacer"></div>
    <!-- Floating bottom header -->
    <div class="public_footer">
	{% if sidelock %}
	    <span class="left">
		* Bold indicates sidelock.
	    </span>
	{% endif %}
	{% if choice %}
	    <span class="left">
		* Bold indicates choice.
	{% endif %}
	<div class="footer-controls">
	    {% if debater_team_memberships_public %}
	    <span class="right">
	    <label for="Member Names">
		    Member Names:
		    <input type="checkbox" name="names" id="name_display_toggle"/>
	    </label>
	    </span>
	{% endif %}
	<span class="right">
	    <label for="autoscroll">
		Autoscroll:
		<input type="checkbox" name="autoscroll" id="autoscroll"/>
	    </label>
	</span>
	</div>
    </div>
{% endblock %}
