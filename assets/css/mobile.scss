// Lightweight responsive overrides to keep core pages usable on smaller screens.

@mixin respond-max($breakpoint) {
  @media (max-width: $breakpoint) {
    @content;
  }
}

@mixin scale-type($body, $h1, $h2, $h3, $h4) {
  body,
  .content { font-size: $body; }
  h1 { font-size: $h1; }
  h2 { font-size: $h2; }
  h3 { font-size: $h3; }
  h4 { font-size: $h4; }
}

@mixin squeeze-spacing($gutter, $small, $medium, $pad-sm, $pad-lg) {
  .row { margin-left: -$gutter; margin-right: -$gutter; }
  .col,
  [class*="col-"] { padding-left: $gutter; padding-right: $gutter; }
  .mt-2,
  .my-2 { margin-top: $small !important; }
  .mb-2,
  .my-2 { margin-bottom: $small !important; }
  .mt-3,
  .my-3,
  .mb-3,
  .my-3 { margin-top: $medium !important; margin-bottom: $medium !important; }
  .p-3 { padding: $pad-sm !important; }
  .p-5 { padding: $pad-lg !important; }
}

@include respond-max(991.98px) {
  @include scale-type(0.7rem, 1.1rem, 1rem, 0.9rem, 0.85rem);

  .btn {
    font-size: 0.65rem;
    padding: 0.25rem 0.5rem;
    white-space: normal;
    line-height: 1.25;
    height: 100%;

    i { margin-right: 0.2rem; }
  }

  .btn-sm,
  .btn-group-sm > .btn { font-size: 0.6rem; padding: 0.25rem 0.4rem; }

  .btn-group { gap: 0.2rem; flex-wrap: wrap; }

  .form-control,
  .form-select,
  input,
  select,
  textarea { font-size: 0.7rem; padding: 0.3rem 0.5rem; }

  table { font-size: 0.65rem; th, td { padding: 0.3rem 0.4rem; } }
  .public_table { font-size: 0.85rem !important; th, td { padding: 0.5rem 0.6rem; } }

  #container-main { padding: 0.5rem !important; }
  .card-body { padding: 0.4rem; }
  .alert { font-size: 0.7rem; padding: 0.4rem 0.5rem; }
  .form-group { margin-bottom: 0.5rem; }

  @include squeeze-spacing(0.5rem, 0.3rem, 0.5rem, 0.5rem, 0.75rem);

  .pairing-controls,
  .pairing-controls + .col-4,
  .col-xl-6 { flex: 0 0 100%; max-width: 100%; }

  .pairing-controls {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(9rem, 1fr));
    gap: 0.3rem;
    align-items: stretch;

    h6 { grid-column: 1 / -1; margin-bottom: 0.2rem; }

    > a,
    > form {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 2.4rem;

      button { width: 100%; height: 100%; }
    }
  }

  h6 { font-size: 0.75rem; margin: 0.45rem 0 0.3rem; }
  small { font-size: 0.7em; }

  .pairing-card {
    margin-bottom: 0.5rem;

    .card-body { padding: 0.3rem; }
    h5 { font-size: 0.8rem; margin-bottom: 0.15rem; }
    p,
    .card-text { font-size: 0.65rem; margin-bottom: 0.15rem; }

    .row { display: flex; flex-wrap: nowrap; margin-left: -0.25rem; margin-right: -0.25rem; }
    .col-5,
    .col-4,
    .col-3 { padding: 0.25rem; min-width: 0; }

    .col-5 {
      h6 { font-size: 0.65rem; margin-bottom: 0.1rem; }
      .team-table td { padding: 0.15rem 0; }
      small { font-size: 0.55rem; }
      .tabcard { font-size: 0.52rem; }
      abbr { font-size: 0.58rem; }
    }

    .col-4 {
      .judge-toggle { font-size: 0.58rem; padding: 0.18rem 0.28rem; white-space: normal; }
      .badge { font-size: 0.5rem; padding: 0.1rem 0.2rem; }
    }

    .col-3 {
      .btn-block { font-size: 0.58rem; padding: 0.2rem 0.28rem; white-space: normal; }
      .room-toggle { font-size: 0.55rem; padding: 0.18rem 0.25rem; }
      i { font-size: 0.55rem; margin-right: 0.15rem; }
    }
  }

  .index_container {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem 0;

    .col-sm {
      flex: 0 0 50%;
      max-width: 50%;
      padding: 0 0.5rem;
    }

    h4 {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.85rem;
      margin-bottom: 0.4rem;
    }

    ol { font-size: 0.75rem; padding-left: 1.4rem; margin-bottom: 0.5rem; }
  }

  .index .d-flex { gap: 0.5rem; align-items: center; }

  .table-responsive,
  .tab-content,
  #debater_ranking,
  #team_ranking {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  #debater_ranking,
  #team_ranking {
    table { table-layout: fixed; font-size: 0.7rem; }
    th,
    td { padding: 0.35rem 0.4rem; white-space: normal; }
  }

  .nav-tabs {
    font-size: 0.85rem;
    flex-wrap: nowrap;
    overflow-x: auto;

    .nav-link { white-space: nowrap; padding: 0.5rem 0.8rem; }
  }

}

@include respond-max(767.98px) {
  @include scale-type(0.65rem, 1rem, 0.9rem, 0.85rem, 0.8rem);
  @include squeeze-spacing(0.4rem, 0.25rem, 0.4rem, 0.4rem, 0.6rem);

  .btn { font-size: 0.6rem; }
  .btn-sm,
  .btn-group-sm > .btn { font-size: 0.6rem; padding: 0.22rem 0.4rem; }

  .pairing-controls { grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 0.25rem; }

  .pairing-card {
    h5 { font-size: 0.75rem; }
    p,
    .card-text { font-size: 0.6rem; }

    .row { margin-left: -0.2rem; margin-right: -0.2rem; }
    .col-5,
    .col-4,
    .col-3 { padding: 0.2rem; }
  }

  .index_container {
    flex-direction: column;

    .col-sm {
      flex: 0 0 100%;
      max-width: 100%;
      margin-bottom: 0.75rem;
    }

    h4 { font-size: 0.9rem; }
    ol { font-size: 0.8rem; column-count: 2; column-gap: 1rem; }
  }

  .public-home {
    padding: 1.4rem 0.9rem;

    .public-home__grid { grid-template-columns: 1fr !important; gap: 1.25rem; }
    .public-home__title { font-size: 1.6rem; }
    .public-home__links { padding: 1.2rem; }
  }

  .public-links__tile {
    grid-template-columns: auto 1fr;
    gap: 0.8rem;
    padding: 1rem 1.1rem;
  }

  .public-links__chevron { display: none; }
  .public-links__body { gap: 0.25rem; }
  .public-links__icon { width: 2.3rem; height: 2.3rem; }
}

@include respond-max(575.98px) {
  @include scale-type(0.6rem, 0.95rem, 0.85rem, 0.8rem, 0.75rem);
  @include squeeze-spacing(0.3rem, 0.25rem, 0.35rem, 0.35rem, 0.55rem);

  .btn { font-size: 0.58rem; padding: 0.22rem 0.45rem; }
  .btn-sm,
  .btn-group-sm > .btn { font-size: 0.55rem; padding: 0.2rem 0.35rem; }

  table { font-size: 0.62rem; th, td { padding: 0.25rem 0.35rem; } }

  .pairing-controls { gap: 0.2rem; }

  .pairing-card {
    .row { margin-left: -0.18rem; margin-right: -0.18rem; }
    .col-5,
    .col-4,
    .col-3 { padding: 0.18rem; }
  }

  .index_container h4.index-section-header {
    font-size: 0.95rem;
    padding: 0.85rem 0.6rem;
    border-radius: 0;
    background: #f8f9fa;
    // Add chevron indicator
      &[data-toggle="collapse"] {
        padding-left: 2.5rem;
        
        &::before {
          content: "\f078"; // chevron-down
          font-family: "Font Awesome 5 Free";
          font-weight: 900;
          position: absolute;
          left: 0.8rem;
          font-size: 0.85rem;
          transition: transform 0.3s ease;
          color: #495057;
        }

        &[aria-expanded="true"]::before {
          transform: translateY(-50%) rotate(-180deg);
        }
      }
  }

  .public-home { padding: 1.15rem 0.75rem; }
  .public-links__tile { padding: 0.85rem 0.9rem; border-left-width: 3px; }
}
